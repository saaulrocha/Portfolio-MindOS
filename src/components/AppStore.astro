---
import { ExternalLink, Download, Star, Github } from "lucide-astro";
import { profile } from "../data/profile";

// App data - Projects as "Apps"
const apps = [
  {
    id: "impulso-web",
    name: "Impulso Web",
    subtitle: "Digital Agency Website",
    description: "Página web profesional para una agencia digital. Diseño moderno, optimizado para SEO y centrado en la conversión.",
    iconImage: "/ImpulsoWebIcon.png",
    category: "Web Development",
    rating: 4.8,
    downloads: "1K+",
    tech: ["HTML", "CSS", "JavaScript"],
    url: "https://impulsoweb.netlify.app/",
    github: null,
    featured: true
  },
  {
    id: "crypto-dashboard",
    name: "Crypto Dashboard",
    subtitle: "Real-time Market Data",
    description: "Dashboard de criptomonedas en tiempo real con datos de mercado, gráficos y filtros dinámicos.",
    iconImage: "/CryptoLogo.png",
    category: "Finance App",
    rating: 4.9,
    downloads: "500+",
    tech: ["TypeScript", "Angular", "REST API"],
    url: "https://v0-crypto-dashboard-snowy-alpha.vercel.app/",
    github: null,
    featured: true
  },
  {
    id: "mindos-portfolio",
    name: "MindOS Portfolio",
    subtitle: "OS-Style Portfolio",
    description: "Portfolio interactivo diseñado como un sistema operativo. Boot sequence, lock screen y apps nativas.",
    iconImage: "/MindOSIcono.png",
    category: "Portfolio",
    rating: 5.0,
    downloads: "New",
    tech: ["Astro", "TypeScript", "Tailwind"],
    url: "/",
    github: profile.links.github,
    featured: true
  }
];

const featuredApps = apps.filter(app => app.featured);
const allApps = apps;
---

<div class="space-y-8">
  <!-- App Store Header -->
  <div class="flex items-center justify-between">
    <div>
      <h2 class="text-2xl font-bold text-white">App Store</h2>
      <p class="text-white/50 text-sm mt-1">Discover amazing projects</p>
    </div>
    <a 
      href={profile.links.github}
      target="_blank"
      class="flex items-center gap-2 px-4 py-2 rounded-xl bg-white/5 hover:bg-white/10 border border-white/10 text-white/70 hover:text-white text-sm transition-all"
    >
      <Github class="w-4 h-4" />
      View All on GitHub
    </a>
  </div>

  <!-- Featured Apps Section -->
  <section>
    <h3 class="text-lg font-semibold text-white mb-4 flex items-center gap-2">
      <Star class="w-5 h-5 text-yellow-400" />
      Featured
    </h3>
    
    <div class="grid gap-4">
      {featuredApps.map((app) => (
        <a 
          href={app.url}
          target={app.url.startsWith('http') ? '_blank' : '_self'}
          class="group block"
        >
          <div class="flex gap-5 p-5 rounded-2xl bg-white/[0.03] border border-white/[0.06] hover:bg-white/[0.06] hover:border-white/[0.12] transition-all duration-300">
            <!-- App Icon -->
            <div class="w-20 h-20 rounded-2xl flex items-center justify-center shadow-lg shrink-0">
              <img src={app.iconImage} alt={app.name} class="w-full h-full object-contain rounded-2xl" />
            </div>
            
            <!-- App Info -->
            <div class="flex-1 min-w-0">
              <div class="flex items-start justify-between gap-4">
                <div>
                  <h4 class="text-lg font-semibold text-white group-hover:text-cyan-400 transition-colors">
                    {app.name}
                  </h4>
                  <p class="text-white/50 text-sm">{app.subtitle}</p>
                </div>
                
                <!-- Get Button -->
                <button class="px-5 py-1.5 rounded-full bg-white/10 hover:bg-cyan-500 text-white text-sm font-semibold transition-all shrink-0">
                  GET
                </button>
              </div>
              
              <p class="text-white/40 text-sm mt-2 line-clamp-2">{app.description}</p>
              
              <!-- Meta -->
              <div class="flex items-center gap-4 mt-3 text-xs text-white/40">
                <span class="flex items-center gap-1">
                  <Star class="w-3 h-3 text-yellow-400" />
                  {app.rating}
                </span>
                <span>{app.category}</span>
                <span class="flex items-center gap-1">
                  <Download class="w-3 h-3" />
                  {app.downloads}
                </span>
              </div>
            </div>
          </div>
        </a>
      ))}
    </div>
  </section>

  <!-- All Apps Grid -->
  <section>
    <h3 class="text-lg font-semibold text-white mb-4">All Projects</h3>
    
    <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
      {allApps.map((app, index) => (
        <a 
          href={app.url}
          target={app.url.startsWith('http') ? '_blank' : '_self'}
          class="group block p-4 rounded-2xl bg-white/[0.03] border border-white/[0.06] hover:bg-white/[0.06] hover:border-white/[0.12] transition-all duration-300 text-center"
          style={`animation: scale-in 0.3s ease-out ${index * 100}ms both`}
        >
          <!-- App Icon -->
          <div class="w-16 h-16 mx-auto rounded-2xl flex items-center justify-center shadow-lg mb-3">
            <img src={app.iconImage} alt={app.name} class="w-full h-full object-contain rounded-2xl" />
          </div>
          
          <!-- App Name -->
          <h4 class="font-semibold text-white text-sm group-hover:text-cyan-400 transition-colors truncate">
            {app.name}
          </h4>
          <p class="text-white/40 text-xs mt-0.5 truncate">{app.category}</p>
          
          <!-- Tech Tags -->
          <div class="flex flex-wrap justify-center gap-1 mt-3">
            {app.tech.slice(0, 2).map((t) => (
              <span class="px-2 py-0.5 rounded text-[10px] bg-white/5 text-white/50 border border-white/5">
                {t}
              </span>
            ))}
          </div>
        </a>
      ))}
    </div>
  </section>
</div>

<style>
  @keyframes scale-in {
    from {
      opacity: 0;
      transform: scale(0.9);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }
  
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
</style>
