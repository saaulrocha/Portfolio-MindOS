---
// Window component - macOS-style window with traffic lights
import { Minus, Square, X } from 'lucide-astro';

interface Props {
  id: string;
  title: string;
  icon?: any;
  class?: string;
  variant?: 'default' | 'terminal';
}

const { id, title, icon: Icon, class: className = '', variant = 'default' } = Astro.props;
---

<section 
  id={id}
  class:list={[
    "window glass-heavy rounded-xl overflow-hidden window-shadow",
    className
  ]}
  style="animation: scale-in 0.5s cubic-bezier(0.16, 1, 0.3, 1) both"
>
  <!-- Window Header -->
  <header class:list={[
    "flex items-center gap-3 px-4 py-3 border-b",
    variant === 'terminal' ? "bg-os-bg border-os-border" : "bg-os-surface/50 border-os-border/50"
  ]}>
    <!-- Traffic Lights -->
    <div class="flex items-center gap-1.5 group">
      <button class="w-3 h-3 rounded-full bg-[#ff5f57] hover:bg-[#ff5f57]/80 transition-colors flex items-center justify-center">
        <X class="w-2 h-2 text-[#870a00] opacity-0 group-hover:opacity-100 transition-opacity" strokeWidth={3} />
      </button>
      <button class="w-3 h-3 rounded-full bg-[#febc2e] hover:bg-[#febc2e]/80 transition-colors flex items-center justify-center">
        <Minus class="w-2 h-2 text-[#9a6800] opacity-0 group-hover:opacity-100 transition-opacity" strokeWidth={3} />
      </button>
      <button class="w-3 h-3 rounded-full bg-[#28c840] hover:bg-[#28c840]/80 transition-colors flex items-center justify-center">
        <Square class="w-1.5 h-1.5 text-[#006500] opacity-0 group-hover:opacity-100 transition-opacity" strokeWidth={3} />
      </button>
    </div>
    
    <!-- Window Title -->
    <div class="flex-1 flex items-center justify-center gap-2">
      {Icon && <Icon class="w-4 h-4 text-os-text-muted" strokeWidth={1.5} />}
      <span class:list={[
        "text-sm",
        variant === 'terminal' ? "font-mono text-os-text-muted" : "font-medium text-os-text-secondary"
      ]}>
        {title}
      </span>
    </div>
    
    <!-- Spacer for centering -->
    <div class="w-14" />
  </header>
  
  <!-- Window Content -->
  <div class:list={[
    "p-6 md:max-h-[70vh] md:overflow-y-auto",
    variant === 'terminal' && "bg-os-bg font-mono"
  ]}>
    <slot />
  </div>
</section>
