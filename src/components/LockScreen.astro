---
import { profile } from "../data/profile";
import { ArrowRight, Github, Linkedin, Mail } from "lucide-astro";
---

<div
  id="lock-screen"
  class="fixed inset-0 z-[150] bg-os-bg bg-[url('/WallPaper.png')] bg-cover bg-center transition-all duration-700 cursor-pointer select-none overflow-hidden"
>
  <!-- Dark Overlay with blur -->
  <div class="absolute inset-0 bg-black/50 backdrop-blur-sm"></div>

  <!-- Grid pattern overlay for OS feel -->
  <div
    class="absolute inset-0 opacity-5"
    style="background-image: radial-gradient(circle at 1px 1px, white 1px, transparent 0); background-size: 40px 40px;"
  >
  </div>

  <!-- Content Container - using padding bottom for clock space -->
  <div
    class="relative z-10 h-full flex flex-col items-center justify-center px-4 py-8"
  >
    <!-- MindOS Logo Section -->
    <div class="flex flex-col items-center animate-fade-in">
      <!-- Logo with glow -->
      <div class="relative group">
        <div
          class="absolute -inset-8 bg-gradient-to-r from-cyan-500/30 via-blue-500/30 to-purple-500/30 rounded-full blur-2xl opacity-60 group-hover:opacity-100 transition-opacity duration-700"
        >
        </div>
        <div
          class="relative w-28 h-28 md:w-40 md:h-40 flex items-center justify-center"
        >
          <img
            src="/LogoMindOS-removebg-preview.png"
            alt="MindOS Logo"
            class="w-full h-full object-contain drop-shadow-2xl"
          />
        </div>
      </div>

      <!-- System Name -->
      <div class="mt-6 text-center">
        <h1 class="text-3xl md:text-5xl font-bold text-white tracking-tight">
          Mind<span
            class="text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-500"
            >OS</span
          >
        </h1>
        <p class="text-white/50 text-xs md:text-sm font-mono mt-2">
          v2.0 â€” Portfolio Operating System
        </p>
      </div>
    </div>

    <!-- Developer Info Card -->
    <div
      class="mt-8 glass-heavy rounded-2xl border border-white/10 p-4 md:p-6 max-w-sm w-full animate-fade-in"
      style="animation-delay: 0.3s"
    >
      <div class="flex items-center gap-3 md:gap-4">
        <img
          src="/saul-rocha.png"
          alt={profile.name}
          class="w-12 h-12 md:w-14 md:h-14 rounded-full ring-2 ring-white/20 object-cover"
        />
        <div class="flex-1">
          <h2 class="text-base md:text-lg font-semibold text-white">
            {profile.name}
          </h2>
          <p class="text-white/60 text-xs md:text-sm">{profile.title}</p>
        </div>
      </div>

      <!-- Quick Links -->
      <div class="flex gap-2 mt-4 pt-4 border-t border-white/10">
        <a
          href={profile.links.github}
          target="_blank"
          class="flex-1 flex items-center justify-center gap-1.5 py-2 rounded-lg bg-white/5 hover:bg-white/10 text-white/70 hover:text-white text-xs md:text-sm transition-all"
          onclick="event.stopPropagation()"
        >
          <Github class="w-3.5 h-3.5 md:w-4 md:h-4" />
          GitHub
        </a>
        <a
          href={profile.links.linkedin}
          target="_blank"
          class="flex-1 flex items-center justify-center gap-1.5 py-2 rounded-lg bg-white/5 hover:bg-white/10 text-white/70 hover:text-white text-xs md:text-sm transition-all"
          onclick="event.stopPropagation()"
        >
          <Linkedin class="w-3.5 h-3.5 md:w-4 md:h-4" />
          LinkedIn
        </a>
        <a
          href={`mailto:${profile.email}`}
          class="flex-1 flex items-center justify-center gap-1.5 py-2 rounded-lg bg-cyan-500/20 hover:bg-cyan-500/30 text-cyan-400 text-xs md:text-sm transition-all"
          onclick="event.stopPropagation()"
        >
          <Mail class="w-3.5 h-3.5 md:w-4 md:h-4" />
          Email
        </a>
      </div>
    </div>

    <!-- Unlock Button -->
    <button
      id="unlock-btn"
      class="mt-6 md:mt-8 flex items-center gap-2 md:gap-3 px-6 md:px-8 py-3 md:py-4 rounded-full bg-gradient-to-r from-cyan-500 to-blue-600 hover:from-cyan-400 hover:to-blue-500 text-white text-sm md:text-base font-medium shadow-lg shadow-cyan-500/25 hover:shadow-cyan-500/40 transition-all duration-300 hover:scale-105 animate-fade-in"
      style="animation-delay: 0.5s"
    >
      <span>Enter Portfolio</span>
      <ArrowRight class="w-4 h-4 md:w-5 md:h-5" />
    </button>

    <!-- Time & Date - inline, not absolute -->
    <div class="mt-8 text-center animate-fade-in" style="animation-delay: 0.6s">
      <p
        id="lock-time"
        class="text-3xl md:text-5xl font-extralight text-white/90 tracking-tight"
      >
      </p>
      <p
        id="lock-date"
        class="text-white/50 text-[10px] md:text-sm font-medium mt-1 uppercase tracking-widest"
      >
      </p>
    </div>
  </div>
</div>

<style>
  @keyframes fade-in {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  .animate-fade-in {
    animation: fade-in 0.8s ease-out both;
  }
  .glass-heavy {
    background: rgba(15, 23, 42, 0.8);
    backdrop-filter: blur(20px);
  }
</style>

<script>
  const lockScreen = document.getElementById("lock-screen");
  const unlockBtn = document.getElementById("unlock-btn");
  const lockTime = document.getElementById("lock-time");
  const lockDate = document.getElementById("lock-date");

  function updateClock() {
    const now = new Date();
    const timeStr = now.toLocaleTimeString("es-ES", {
      hour: "2-digit",
      minute: "2-digit",
      hour12: false,
    });
    if (lockTime) lockTime.textContent = timeStr;
    const dateStr = now.toLocaleDateString("es-ES", {
      weekday: "long",
      day: "numeric",
      month: "long",
    });
    if (lockDate)
      lockDate.textContent = dateStr.charAt(0).toUpperCase() + dateStr.slice(1);
  }

  updateClock();
  setInterval(updateClock, 1000);

  const unlock = () => {
    if (lockScreen && !lockScreen.classList.contains("unlocking")) {
      lockScreen.classList.add("unlocking");
      lockScreen.style.opacity = "0";
      lockScreen.style.transform = "scale(1.02)";
      setTimeout(() => {
        lockScreen.classList.add("hidden");
        const desktop = document.getElementById("desktop-environment");
        if (desktop) {
          desktop.classList.remove("opacity-0", "pointer-events-none");
          desktop.classList.add("opacity-100", "pointer-events-auto");
        }
      }, 500);
    }
  };

  unlockBtn?.addEventListener("click", (e) => {
    e.stopPropagation();
    unlock();
  });
  lockScreen?.addEventListener("click", unlock);
  document.addEventListener("keydown", (e) => {
    if (!lockScreen?.classList.contains("hidden") && e.key === "Enter")
      unlock();
  });
</script>
